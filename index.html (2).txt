<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mood Memory Calendar</title>
<style>
body{
margin:0;
font-family:"Poppins",sans-serif;
background:url('https://images.unsplash.com/photo-1507842217343-583bb7270b66') no-repeat center/cover fixed;
overflow:hidden;
}
.cover{
position:fixed;inset:0;
background:rgba(30,20,10,.65);
display:flex;flex-direction:column;justify-content:center;align-items:center;
color:#f5f5f5;z-index:10;transition:transform 1s ease-in-out;
}
.cover.slide-left{transform:translateX(-100%);}
.cover h1{font-size:2.8em;margin-bottom:20px;text-shadow:0 0 10px rgba(255,255,255,.2);}
.open-btn{
padding:10px 30px;font-size:1.1em;border:none;border-radius:25px;cursor:pointer;
background:#d8b08c;color:#fff;transition:.3s;
}
.open-btn:hover{background:#c49a7b;}
header{
display:flex;justify-content:center;align-items:center;gap:15px;
margin-top:40px;color:#fff;text-shadow:0 0 5px #000;
opacity:0;transition:opacity 1s ease;
}
header.visible{opacity:1;}
header select,header button{
background:#d8b08c;color:#fff;border:none;border-radius:8px;
padding:6px 10px;cursor:pointer;font-size:1em;transition:.3s;
}
header button:hover,header select:hover{background:#c49a7b;}
.calendar{
display:grid;grid-template-columns:repeat(7,1fr);
gap:10px;max-width:800px;margin:20px auto 60px;
color:#000;opacity:0;pointer-events:none;transition:opacity 1s ease;
}
.calendar.visible{opacity:1;pointer-events:auto;}
.day-name{text-align:center;color:#fff;font-weight:600;}
.day{
background:rgba(255,245,230,.95);border-radius:12px;text-align:center;
padding:15px 8px;font-size:1.1em;cursor:pointer;
transition:.3s;display:flex;flex-direction:column;align-items:center;justify-content:center;
}
.day span.emoji{font-size:1.5em;margin-top:5px;}
.day:hover{transform:scale(1.05);background:rgba(255,245,230,1);}
.sidebar{
position:fixed;top:0;right:-400px;width:300px;height:100%;
background:rgba(50,40,30,.8);color:#fff;backdrop-filter:blur(6px);
padding:20px;box-sizing:border-box;border-left:1px solid rgba(255,255,255,.2);
transition:right .6s ease,opacity .5s ease;opacity:0;z-index:15;
overflow-y:auto;
}
.sidebar.active{right:0;opacity:1;}
.sidebar h2{margin-top:0;}
.sidebar select,.sidebar textarea,.sidebar input{
width:100%;margin-top:8px;margin-bottom:12px;padding:8px;
border:none;border-radius:6px;font-family:"Poppins",sans-serif;
}
.sidebar button{
padding:8px 15px;border:none;border-radius:20px;cursor:pointer;
background:#d8b08c;color:#fff;transition:.3s;margin:3px;
}
.sidebar button:hover{background:#c49a7b;}
.link-preview{margin-top:8px;}
.link-preview iframe,.link-preview img{
width:100%;border:none;border-radius:8px;margin-bottom:5px;
}
.delete-btn{
background:#a55;padding:3px 8px;font-size:.8em;border:none;border-radius:10px;
color:#fff;margin-bottom:10px;cursor:pointer;
}
.delete-btn:hover{background:#c66;}
.link-preview a{
color:#f2d8c2;text-decoration:none;display:block;margin-bottom:4px;
}
.export-import{
display:flex;justify-content:center;gap:10px;margin-bottom:10px;flex-wrap:wrap;
}
</style>
</head>
<body>
<div class="cover" id="cover">
<h1>Mood Memory Calendar</h1>
<button class="open-btn" onclick="openCalendar()">Open Calendar</button>
</div>

<header id="header">
<button onclick="changeYear(-1)">â—€</button>
<select id="monthSelect"></select>
<select id="yearSelect"></select>
<button onclick="changeYear(1)">â–¶</button>
</header>

<div class="calendar" id="calendar"></div>

<div class="sidebar" id="sidebar">
<h2 id="selectedDate"></h2>
<label>Mood Emoji:</label>
<select id="emojiInput">
<option value="">Select...</option>
<option>ğŸ˜Š</option><option>ğŸ˜¢</option><option>ğŸ˜¡</option><option>ğŸ˜</option>
<option>ğŸ˜´</option><option>ğŸ¤©</option><option>ğŸ™ƒ</option><option>ğŸ¥º</option>
<option>ğŸ˜Œ</option><option>ğŸ’ª</option><option>ğŸŒ¸</option><option>ğŸ˜”</option>
<option>ğŸ¤”</option><option>ğŸ˜‡</option>
</select>
<label>Note:</label>
<textarea id="noteInput" placeholder="Write how you feel..."></textarea>

<label>Video/Music Link:</label>
<input type="text" id="linkInput" placeholder="Paste YouTube, Spotify, TikTok, or Instagram link" />
<button onclick="addLink()">Add Link</button>

<label>Add Picture:</label>
<input type="file" id="imageInput" accept="image/*" />
<button onclick="addImage()">Add Image</button>

<div class="link-preview" id="linkPreview"></div>
<button onclick="saveMemory()">Save All</button>

<div class="export-import">
<button onclick="exportData()">â¬‡ Export</button>
<input type="file" id="importFile" style="display:none" accept=".json" />
<button onclick="document.getElementById('importFile').click()">â¬† Import</button>
</div>
</div>

<script>
const calendar=document.getElementById("calendar");
const sidebar=document.getElementById("sidebar");
const selectedDate=document.getElementById("selectedDate");
const emojiInput=document.getElementById("emojiInput");
const noteInput=document.getElementById("noteInput");
const linkInput=document.getElementById("linkInput");
const imageInput=document.getElementById("imageInput");
const linkPreview=document.getElementById("linkPreview");
const cover=document.getElementById("cover");
const header=document.getElementById("header");
const monthSelect=document.getElementById("monthSelect");
const yearSelect=document.getElementById("yearSelect");

const months=["January","February","March","April","May","June","July","August","September","October","November","December"];
const dayNames=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];
let currentMonth=new Date().getMonth();
let currentYear=new Date().getFullYear();
let currentDay=null;

months.forEach((m,i)=>{
const opt=document.createElement("option");
opt.value=i;opt.textContent=m;monthSelect.appendChild(opt);
});
for(let y=2000;y<=2100;y++){
const opt=document.createElement("option");
opt.value=y;opt.textContent=y;yearSelect.appendChild(opt);
}
monthSelect.onchange=()=>{currentMonth=parseInt(monthSelect.value);renderCalendar();}
yearSelect.onchange=()=>{currentYear=parseInt(yearSelect.value);renderCalendar();}

function openCalendar(){
cover.classList.add("slide-left");
setTimeout(()=>{calendar.classList.add("visible");header.classList.add("visible");renderCalendar();},800);
}

function changeYear(step){
currentYear+=step;
if(currentYear<2000)currentYear=2000;
if(currentYear>2100)currentYear=2100;
yearSelect.value=currentYear;
renderCalendar();
}

function renderCalendar(){
calendar.innerHTML="";
monthSelect.value=currentMonth;
yearSelect.value=currentYear;
dayNames.forEach(d=>{
const dn=document.createElement("div");
dn.className="day-name";dn.textContent=d;
calendar.appendChild(dn);
});
const firstDay=new Date(currentYear,currentMonth,1).getDay();
const startOffset=(firstDay===0?6:firstDay-1);
const daysInMonth=new Date(currentYear,currentMonth+1,0).getDate();
for(let i=0;i<startOffset;i++){calendar.appendChild(document.createElement("div"));}
for(let i=1;i<=daysInMonth;i++){
const day=document.createElement("div");
day.classList.add("day");
day.innerHTML=`<div class="num">${i}</div><span class="emoji"></span>`;
day.onclick=()=>openSidebar(i);
calendar.appendChild(day);
const key=`mood_${currentYear}_${currentMonth}_${i}`;
const data=JSON.parse(localStorage.getItem(key))||{};
if(data.emoji){day.querySelector(".emoji").textContent=data.emoji;}
}
}

function openSidebar(day){
currentDay=day;
selectedDate.textContent=`${months[currentMonth]} ${day}, ${currentYear}`;
sidebar.classList.add("active");
const key=`mood_${currentYear}_${currentMonth}_${day}`;
const data=JSON.parse(localStorage.getItem(key))||{links:[],images:[]};
emojiInput.value=data.emoji||"";
noteInput.value=data.note||"";
renderLinks(data.links,data.images);
}

function addLink(){
const url=linkInput.value.trim();
if(!url)return;
const key=`mood_${currentYear}_${currentMonth}_${currentDay}`;
const data=JSON.parse(localStorage.getItem(key))||{links:[],images:[]};
data.links.push(url);
localStorage.setItem(key,JSON.stringify(data));
linkInput.value="";
renderLinks(data.links,data.images);
}

function addImage(){
const file=imageInput.files[0];
if(!file)return;
const reader=new FileReader();
reader.onload=()=>{
const key=`mood_${currentYear}_${currentMonth}_${currentDay}`;
const data=JSON.parse(localStorage.getItem(key))||{links:[],images:[]};
data.images.push(reader.result);
localStorage.setItem(key,JSON.stringify(data));
renderLinks(data.links,data.images);
imageInput.value="";
};
reader.readAsDataURL(file);
}

function renderLinks(links,images){
linkPreview.innerHTML="";
links.forEach((link,index)=>{
const container=document.createElement("div");
if(link.includes("youtube.com")||link.includes("youtu.be")){
const videoId=link.split("v=")[1]?.split("&")[0]||link.split("/").pop();
const iframe=document.createElement("iframe");
iframe.src=`https://www.youtube.com/embed/${videoId}`;
iframe.height="160";container.appendChild(iframe);
} else if(link.includes("open.spotify.com")){
const spotifyId=link.split("spotify.com/")[1];
const iframe=document.createElement("iframe");
iframe.src=`https://open.spotify.com/embed/${spotifyId}`;
iframe.allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture";
iframe.width="100%";iframe.height="152";iframe.style.borderRadius="8px";
container.appendChild(iframe);
} else if(link.includes("tiktok.com")){
const iframe=document.createElement("iframe");
iframe.src=link;
iframe.height="500";container.appendChild(iframe);
} else if(link.includes("instagram.com")){
const iframe=document.createElement("iframe");
iframe.src=link;
iframe.height="500";container.appendChild(iframe);
} else {
const a=document.createElement("a");
a.href=link;a.target="_blank";a.textContent=link;
container.appendChild(a);
}
const del=document.createElement("button");
del.textContent="ğŸ—‘";del.className="delete-btn";
del.onclick=()=>deleteLink(index);
container.appendChild(del);
linkPreview.appendChild(container);
});
images.forEach((src,index)=>{
const container=document.createElement("div");
const img=document.createElement("img");
img.src=src;container.appendChild(img);
const del=document.createElement("button");
del.textContent="ğŸ—‘";del.className="delete-btn";
del.onclick=()=>deleteImage(index);
container.appendChild(del);
linkPreview.appendChild(container);
});
}

function deleteLink(index){
const key=`mood_${currentYear}_${currentMonth}_${currentDay}`;
const data=JSON.parse(localStorage.getItem(key));
if(!data)return;
data.links.splice(index,1);
localStorage.setItem(key,JSON.stringify(data));
renderLinks(data.links,data.images);
}

function deleteImage(index){
const key=`mood_${currentYear}_${currentMonth}_${currentDay}`;
const data=JSON.parse(localStorage.getItem(key));
if(!data)return;
data.images.splice(index,1);
localStorage.setItem(key,JSON.stringify(data));
renderLinks(data.links,data.images);
}

function saveMemory(){
const key=`mood_${currentYear}_${currentMonth}_${currentDay}`;
const data=JSON.parse(localStorage.getItem(key))||{links:[],images:[]};
data.emoji=emojiInput.value;
data.note=noteInput.value;
localStorage.setItem(key,JSON.stringify(data));
renderCalendar();
sidebar.classList.remove("active");
}

function exportData(){
const blob=new Blob([JSON.stringify(localStorage,null,2)],{type:"application/json"});
const a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="mood_calendar_backup.json";
a.click();
}

document.getElementById("importFile").addEventListener("change",function(e){
const file=e.target.files[0];
if(!file)return;
const reader=new FileReader();
reader.onload=()=>{
const imported=JSON.parse(reader.result);
localStorage.clear();
for(const [key,val] of Object.entries(imported)){
localStorage.setItem(key,val);
}
alert("Backup restored successfully!");
location.reload();
};
reader.readAsText(file);
});

window.onclick=e=>{
if(!sidebar.contains(e.target)&&!e.target.closest(".day"))
sidebar.classList.remove("active");
};
</script>
</body>
</html>
